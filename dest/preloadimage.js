!function(a){var b=function(a,b,c,d){var e,f,g,h,i,j=this,k=[],l=null,m=function(){for(var a=0;a<k.length;a++)k[a].end?k.splice(a--,1):k[a]();!k.length&&n()},n=function(){clearInterval(l),l=null},o=new Image;return o.src=a,o.complete?(j.circuGet(o,b),void(c&&c.call(o))):(f=o.width,g=o.height,o.onerror=function(){d&&d.call(o),e.end=!0,o=o.onload=o.onerror=null},e=function(){h=o.width,i=o.height,(h!==f||i!==g||h*i>1024)&&(j.circuGet(o,b),e.end=!0)},e(),o.onload=function(){!e.end&&e(),c&&c.call(o),o=o.onload=o.onerror=null},void(e.end||(k.push(e),null===l&&(l=setInterval(m,40)))))};b.prototype.circuGet=function(a,b){var c,d=0,e=function(){return a.width>0&&a.height>0?void b.call(a):void(d>5||(window.console&&console.log(a," try to get img width and height!!"),c=setTimeout(e,40),d++))};e()},a.preloadimage=function(a,c,d,e){new b(a,c,d,e)}}(this);